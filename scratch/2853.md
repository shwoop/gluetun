# Notes

How to recreate, in theory:

```sh
/workspaces/gluetun master â¯ ping 1.1.1.1 -c 3
PING 1.1.1.1 (1.1.1.1): 56 data bytes
64 bytes from 1.1.1.1: seq=0 ttl=63 time=15.637 ms
64 bytes from 1.1.1.1: seq=1 ttl=63 time=21.831 ms
64 bytes from 1.1.1.1: seq=2 ttl=63 time=23.036 ms

--- 1.1.1.1 ping statistics ---
3 packets transmitted, 3 packets received, 0% packet loss
round-trip min/avg/max = 15.637/20.168/23.036 ms
/workspaces/gluetun master â¯ iptables -A OUTPUT -d 1.1.1.1 -j REJECT
/workspaces/gluetun master â¯ ping 1.1.1.1 -c 3
PING 1.1.1.1 (1.1.1.1): 56 data bytes
ping: sendto: Operation not permitted
/workspaces/gluetun master â¯ iptables -D OUTPUT -d 1.1.1.1 -j REJECT
/workspaces/gluetun master â¯ ping 1.1.1.1 -c 3
PING 1.1.1.1 (1.1.1.1): 56 data bytes
64 bytes from 1.1.1.1: seq=0 ttl=63 time=15.544 ms
64 bytes from 1.1.1.1: seq=1 ttl=63 time=21.445 ms
64 bytes from 1.1.1.1: seq=2 ttl=63 time=22.651 ms

--- 1.1.1.1 ping statistics ---
3 packets transmitted, 3 packets received, 0% packet loss
round-trip min/avg/max = 15.544/19.880/22.651 ms
```

Had to recreate on host mac system:

```sh
[~/repos/gluetun]$ sudo pfctl -sr
No ALTQ support in kernel
ALTQ related functions disabled
scrub-anchor "com.apple/*" all fragment reassemble
anchor "com.apple/*" all
block drop out inet from any to 1.1.1.1
block drop out quick inet from any to 1.1.1.1
```

```sh
/workspaces/gluetun al-dns-2853 ?2 â¯ docker compose up                                                                                                                                         4m 0s root@c881bc25c047
Attaching to gluetun
gluetun  | ========================================
gluetun  | ========================================
gluetun  | =============== gluetun ================
gluetun  | ========================================
gluetun  | =========== Made with â¤ï¸ by ============
gluetun  | ======= https://github.com/qdm12 =======
gluetun  | ========================================
gluetun  | ========================================
gluetun  | 
gluetun  | Running version v3.40.0 built on 2024-12-25T22:01:25.675Z (commit e890c50)
gluetun  | 
gluetun  | ðŸ”§ Need help? â˜• Discussion? https://github.com/qdm12/gluetun/discussions/new/choose
gluetun  | ðŸ› Bug? âœ¨ New feature? https://github.com/qdm12/gluetun/issues/new/choose
gluetun  | ðŸ’» Email? quentin.mcgaw@gmail.com
gluetun  | ðŸ’° Help me? https://www.paypal.me/qmcgaw https://github.com/sponsors/qdm12
gluetun  | 2025-09-18T20:24:28+01:00 INFO [routing] default route found: interface eth0, gateway 172.18.0.1, assigned IP 172.18.0.2 and family v4
gluetun  | 2025-09-18T20:24:28+01:00 INFO [routing] local ethernet link found: gretap0
gluetun  | 2025-09-18T20:24:28+01:00 INFO [routing] local ethernet link found: erspan0
gluetun  | 2025-09-18T20:24:28+01:00 INFO [routing] local ethernet link found: eth0
gluetun  | 2025-09-18T20:24:28+01:00 INFO [routing] local ipnet found: 172.18.0.0/16
gluetun  | 2025-09-18T20:24:29+01:00 INFO [firewall] enabling...
gluetun  | 2025-09-18T20:24:29+01:00 INFO [firewall] enabled successfully
gluetun  | 2025-09-18T20:24:29+01:00 INFO [storage] merging by most recent 20776 hardcoded servers and 20776 servers read from /gluetun/servers.json
gluetun  | 2025-09-18T20:24:29+01:00 INFO Alpine version: 3.20.3
gluetun  | 2025-09-18T20:24:29+01:00 INFO OpenVPN 2.5 version: 2.5.10
gluetun  | 2025-09-18T20:24:29+01:00 INFO OpenVPN 2.6 version: 2.6.11
gluetun  | 2025-09-18T20:24:29+01:00 INFO IPtables version: v1.8.10
gluetun  | 2025-09-18T20:24:29+01:00 INFO Settings summary:
gluetun  | â”œâ”€â”€ VPN settings:
gluetun  | |   â”œâ”€â”€ VPN provider settings:
gluetun  | |   |   â”œâ”€â”€ Name: private internet access
gluetun  | |   |   â””â”€â”€ Server selection settings:
gluetun  | |   |       â”œâ”€â”€ VPN type: openvpn
gluetun  | |   |       â””â”€â”€ OpenVPN server selection settings:
gluetun  | |   |           â”œâ”€â”€ Protocol: UDP
gluetun  | |   |           â””â”€â”€ Private Internet Access encryption preset: strong
gluetun  | |   â””â”€â”€ OpenVPN settings:
gluetun  | |       â”œâ”€â”€ OpenVPN version: 2.6
gluetun  | |       â”œâ”€â”€ User: [set]
gluetun  | |       â”œâ”€â”€ Password: [set]
gluetun  | |       â”œâ”€â”€ Private Internet Access encryption preset: strong
gluetun  | |       â”œâ”€â”€ Network interface: tun0
gluetun  | |       â”œâ”€â”€ Run OpenVPN as: root
gluetun  | |       â””â”€â”€ Verbosity level: 1
gluetun  | â”œâ”€â”€ DNS settings:
gluetun  | |   â”œâ”€â”€ Keep existing nameserver(s): no
gluetun  | |   â”œâ”€â”€ DNS server address to use: 127.0.0.1
gluetun  | |   â””â”€â”€ DNS over TLS settings:
gluetun  | |       â”œâ”€â”€ Enabled: yes
gluetun  | |       â”œâ”€â”€ Update period: every 24h0m0s
gluetun  | |       â”œâ”€â”€ Upstream resolvers:
gluetun  | |       |   â””â”€â”€ cloudflare
gluetun  | |       â”œâ”€â”€ Caching: yes
gluetun  | |       â”œâ”€â”€ IPv6: no
gluetun  | |       â””â”€â”€ DNS filtering settings:
gluetun  | |           â”œâ”€â”€ Block malicious: yes
gluetun  | |           â”œâ”€â”€ Block ads: no
gluetun  | |           â”œâ”€â”€ Block surveillance: no
gluetun  | |           â””â”€â”€ Blocked IP networks:
gluetun  | |               â”œâ”€â”€ 127.0.0.1/8
gluetun  | |               â”œâ”€â”€ 10.0.0.0/8
gluetun  | |               â”œâ”€â”€ 172.16.0.0/12
gluetun  | |               â”œâ”€â”€ 192.168.0.0/16
gluetun  | |               â”œâ”€â”€ 169.254.0.0/16
gluetun  | |               â”œâ”€â”€ ::1/128
gluetun  | |               â”œâ”€â”€ fc00::/7
gluetun  | |               â”œâ”€â”€ fe80::/10
gluetun  | |               â”œâ”€â”€ ::ffff:127.0.0.1/104
gluetun  | |               â”œâ”€â”€ ::ffff:10.0.0.0/104
gluetun  | |               â”œâ”€â”€ ::ffff:169.254.0.0/112
gluetun  | |               â”œâ”€â”€ ::ffff:172.16.0.0/108
gluetun  | |               â””â”€â”€ ::ffff:192.168.0.0/112
gluetun  | â”œâ”€â”€ Firewall settings:
gluetun  | |   â”œâ”€â”€ Enabled: yes
gluetun  | |   â””â”€â”€ Outbound subnets:
gluetun  | |       â””â”€â”€ 192.168.1.0/24
gluetun  | â”œâ”€â”€ Log settings:
gluetun  | |   â””â”€â”€ Log level: info
gluetun  | â”œâ”€â”€ Health settings:
gluetun  | |   â”œâ”€â”€ Server listening address: 127.0.0.1:9999
gluetun  | |   â”œâ”€â”€ Target address: cloudflare.com:443
gluetun  | |   â”œâ”€â”€ Duration to wait after success: 5s
gluetun  | |   â”œâ”€â”€ Read header timeout: 100ms
gluetun  | |   â”œâ”€â”€ Read timeout: 500ms
gluetun  | |   â””â”€â”€ VPN wait durations:
gluetun  | |       â”œâ”€â”€ Initial duration: 6s
gluetun  | |       â””â”€â”€ Additional duration: 5s
gluetun  | â”œâ”€â”€ Shadowsocks server settings:
gluetun  | |   â””â”€â”€ Enabled: no
gluetun  | â”œâ”€â”€ HTTP proxy settings:
gluetun  | |   â”œâ”€â”€ Enabled: yes
gluetun  | |   â”œâ”€â”€ Listening address: :8888
gluetun  | |   â”œâ”€â”€ User: 
gluetun  | |   â”œâ”€â”€ Password: [not set]
gluetun  | |   â”œâ”€â”€ Stealth mode: no
gluetun  | |   â”œâ”€â”€ Log: no
gluetun  | |   â”œâ”€â”€ Read header timeout: 1s
gluetun  | |   â””â”€â”€ Read timeout: 3s
gluetun  | â”œâ”€â”€ Control server settings:
gluetun  | |   â”œâ”€â”€ Listening address: :8000
gluetun  | |   â”œâ”€â”€ Logging: yes
gluetun  | |   â””â”€â”€ Authentication file path: /gluetun/auth/config.toml
gluetun  | â”œâ”€â”€ Storage settings:
gluetun  | |   â””â”€â”€ Filepath: /gluetun/servers.json
gluetun  | â”œâ”€â”€ OS Alpine settings:
gluetun  | |   â”œâ”€â”€ Process UID: 1000
gluetun  | |   â”œâ”€â”€ Process GID: 1000
gluetun  | |   â””â”€â”€ Timezone: europe/london
gluetun  | â”œâ”€â”€ Public IP settings:
gluetun  | |   â”œâ”€â”€ IP file path: /tmp/gluetun/ip
gluetun  | |   â”œâ”€â”€ Public IP data base API: ipinfo
gluetun  | |   â””â”€â”€ Public IP data backup APIs:
gluetun  | |       â”œâ”€â”€ ifconfigco
gluetun  | |       â”œâ”€â”€ ip2location
gluetun  | |       â””â”€â”€ cloudflare
gluetun  | â””â”€â”€ Version settings:
gluetun  |     â””â”€â”€ Enabled: yes
gluetun  | 2025-09-18T20:24:29+01:00 INFO [routing] default route found: interface eth0, gateway 172.18.0.1, assigned IP 172.18.0.2 and family v4
gluetun  | 2025-09-18T20:24:29+01:00 INFO [routing] adding route for 0.0.0.0/0
gluetun  | 2025-09-18T20:24:29+01:00 INFO [firewall] setting allowed subnets...
gluetun  | 2025-09-18T20:24:29+01:00 INFO [routing] default route found: interface eth0, gateway 172.18.0.1, assigned IP 172.18.0.2 and family v4
gluetun  | 2025-09-18T20:24:29+01:00 INFO [routing] adding route for 192.168.1.0/24
gluetun  | 2025-09-18T20:24:29+01:00 INFO [http server] http server listening on [::]:8000
gluetun  | 2025-09-18T20:24:29+01:00 INFO [healthcheck] listening on 127.0.0.1:9999
gluetun  | 2025-09-18T20:24:29+01:00 INFO [dns] using plaintext DNS at address 1.1.1.1
gluetun  | 2025-09-18T20:24:29+01:00 INFO [http proxy] listening on :8888
gluetun  | 2025-09-18T20:24:29+01:00 INFO [firewall] allowing VPN connection...
gluetun  | 2025-09-18T20:24:29+01:00 INFO [openvpn] OpenVPN 2.6.11 aarch64-alpine-linux-musl [SSL (OpenSSL)] [LZO] [LZ4] [EPOLL] [MH/PKTINFO] [AEAD]
gluetun  | 2025-09-18T20:24:29+01:00 INFO [openvpn] library versions: OpenSSL 3.3.2 3 Sep 2024, LZO 2.10
gluetun  | 2025-09-18T20:24:29+01:00 INFO [openvpn] TCP/UDP: Preserving recently used remote address: [AF_INET]143.244.41.146:1197
gluetun  | 2025-09-18T20:24:29+01:00 INFO [openvpn] UDPv4 link local: (not bound)
gluetun  | 2025-09-18T20:24:29+01:00 INFO [openvpn] UDPv4 link remote: [AF_INET]143.244.41.146:1197
gluetun  | 2025-09-18T20:24:35+01:00 INFO [healthcheck] program has been unhealthy for 6s: restarting VPN (healthcheck error: dialing: dial tcp4: lookup cloudflare.com on 1.1.1.1:53: write udp 172.18.0.2:56732->1.1.1.1:53: write: operation not permitted)
gluetun  | 2025-09-18T20:24:35+01:00 INFO [healthcheck] ðŸ‘‰ See https://github.com/qdm12/gluetun-wiki/blob/main/faq/healthcheck.md
gluetun  | 2025-09-18T20:24:35+01:00 INFO [healthcheck] DO NOT OPEN AN ISSUE UNLESS YOU READ AND TRIED EACH POSSIBLE SOLUTION
gluetun  | 2025-09-18T20:24:35+01:00 INFO [vpn] stopping
gluetun  | 2025-09-18T20:24:35+01:00 INFO [vpn] starting
gluetun  | 2025-09-18T20:24:35+01:00 INFO [firewall] allowing VPN connection...
gluetun  | 2025-09-18T20:24:35+01:00 INFO [openvpn] OpenVPN 2.6.11 aarch64-alpine-linux-musl [SSL (OpenSSL)] [LZO] [LZ4] [EPOLL] [MH/PKTINFO] [AEAD]
gluetun  | 2025-09-18T20:24:35+01:00 INFO [openvpn] library versions: OpenSSL 3.3.2 3 Sep 2024, LZO 2.10
gluetun  | 2025-09-18T20:24:35+01:00 INFO [openvpn] TCP/UDP: Preserving recently used remote address: [AF_INET]95.181.234.25:1197
gluetun  | 2025-09-18T20:24:35+01:00 INFO [openvpn] UDPv4 link local: (not bound)
gluetun  | 2025-09-18T20:24:35+01:00 INFO [openvpn] UDPv4 link remote: [AF_INET]95.181.234.25:1197
gluetun  | 2025-09-18T20:24:46+01:00 INFO [healthcheck] program has been unhealthy for 11s: restarting VPN (healthcheck error: dialing: dial tcp4: lookup cloudflare.com on 1.1.1.1:53: write udp 172.18.0.2:36642->1.1.1.1:53: write: operation not permitted)
```

Set backup DOT provider:`DOT_PROVIDERS=cloudflare,quad9`
Still failing.

Set IP to 9999 but still faling:

```
gluetun  | 2025-09-18T20:30:34+01:00 INFO [healthcheck] program has been unhealthy for 6s: restarting VPN (healthcheck error: dialing: dial tcp4: lookup cloudflare.com on 9.9.9.9:53: write udp 172.18.0.2:34061->9.9.9.9:53: write: operation not permitted)
```




wc -l /gluetun/servers.json

./gluetun-entrypoint update -enduser -providers 'private internet access'
